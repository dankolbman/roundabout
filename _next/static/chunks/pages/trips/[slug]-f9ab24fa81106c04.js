(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14],{7023:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trips/[slug]",function(){return t(5070)}])},5070:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return y},default:function(){return v}});var i=t(5893),r=t(1163),a=t(7283),s=t(3056),o=t(3153);function c(e){var n=e.title,t=e.year,r=e.location;return(0,i.jsx)("div",{className:"lg:flex lg:items-center lg:justify-between",children:(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold leading-7 text-gray-900 sm:text-4xl sm:truncate",children:n}),(0,i.jsxs)("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6",children:[(0,i.jsxs)("div",{className:"mt-2 flex items-center text-sm text-stone-600",children:[(0,i.jsx)(o.Que,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-stone-500","aria-hidden":"true"}),t]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center text-sm text-stone-600",children:[(0,i.jsx)(o.IS8,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-stone-500","aria-hidden":"true"}),r]})]})]})})}var l=t(3323),x=t(7294),d=t(6785);t(1634);function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){m(e,n,t[n])}))}return e}var f={id:"line",type:"line",paint:{"line-color":"#0284C7"}};function h(e){e.tripId;var n=e.geoJSON;if(!n)return(0,i.jsx)("div",{children:"loading"});var t=function(){var e={xMin:180,xMax:-180,yMin:180,yMax:-180};return n.geometry.coordinates.forEach((function(n){var t=n[0],i=n[1];e.xMin=e.xMin<t?e.xMin:t,e.xMax=e.xMax>t?e.xMax:t,e.yMin=e.yMin<i?e.yMin:i,e.yMax=e.yMax>i?e.yMax:i})),[[e.xMin,e.yMin],[e.xMax,e.yMax]]},r=new d.DW({width:800,height:600}).fitBounds(t(),{padding:40,offset:[0,-100]}),a=(0,x.useState)(u({},r)),s=a[0],o=a[1];return(0,x.useEffect)((function(){var e=new d.DW({width:800,height:600}).fitBounds(t(),{padding:40,offset:[0,-100]});o(u({},e))}),[n]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"h-full max-h-96 bg-stone-300",children:(0,i.jsx)(d.ZP,u({},s,{width:"100%",height:"100%",mapboxApiAccessToken:"pk.eyJ1IjoiZGFuazUyOCIsImEiOiJja3owZ2N1cjIxYWRiMnp0YjVlN2o1Mzh4In0.fLO4uMzR-1q7XZwttnadNA",onViewportChange:function(e){return o(e)},children:(0,i.jsx)(d.Hw,{id:"my-data",type:"geojson",data:n,children:(0,i.jsx)(d.mh,u({},f))})}))})})}var p=function(e){var n=e.memory,t=["-rotate-2","-rotate-1","rotate-1","rotate-2"],r=t[Math.floor(Math.random()*t.length)],a=n.image.replace("/media/","/");return(0,i.jsxs)("li",{className:"flex even:flex-row-reverse space-x-8",children:[n.image&&(0,i.jsx)("div",{className:"w-64",children:(0,i.jsx)("img",{src:"".concat("https://api.dankolbman.xyz").concat(a),className:"rounded-md ".concat(r," max-h-96 max-h-96")})}),(0,i.jsxs)("div",{className:"flex-grow",children:[(0,i.jsx)("div",{className:"font-medium text-lg text-stone-900",children:n.title}),(0,i.jsxs)("div",{className:"space-x-2",children:[(0,i.jsx)("span",{className:"text-stone-700 text-sm font-light",children:new Date(n.time).toLocaleString("en-us",{year:"numeric",month:"long",weekDay:"long",day:"numeric"})}),n.location&&(0,i.jsx)("span",{className:"text-stone-700 text-sm",children:n.location})]}),(0,i.jsx)("p",{className:"font-light text-stone-700",children:n.description})]})]},n.id)};function g(){var e,n,t=(e=['\n  query Trip($tripId: ID!) {\n    trip(id: $tripId) {\n      id\n      name\n      createdAt\n      description\n      location\n      tripTime\n      geoJSON {\n        type\n        geometry {\n          type\n          coordinates\n        }\n      }\n      memories(orderBy: "time") {\n        edges {\n          node {\n            id\n            time\n            title\n            location\n            description\n            image\n          }\n        }\n      }\n    }\n  }\n'],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return g=function(){return t},t}var j=(0,a.Ps)(g()),y=!0,v=function(e){var n=e.name,t=e.description,a=e.year,o=e.location,x=e.geoJSON,d=e.memories,m=((0,r.useRouter)().query.slug,(0,s.a)(j));m.data,m.loading,m.error;return(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(h,{geoJSON:x}),(0,i.jsx)("img",{className:"h-64 min-w-full object-cover object-center",src:{2015:"/vietnam.jpg",2017:"/south_africa.jpg",2019:"/rickshaw_run.jpg",2021:"/cathedral_valley.jpg"}[a]}),(0,i.jsxs)("div",{className:"relative bg-stone-50/80 -top-24 mx-6 py-6 px-2 sm:px-6 lg:px-8",children:[(0,i.jsx)(c,{title:n,year:a,location:o}),(0,i.jsx)("div",{className:"max-w-prose py-4 text-lg",children:t}),(0,i.jsx)("ul",{className:"space-y-8",children:d&&d.edges.map((function(e){var n=e.node;return(0,i.jsx)(p,{memory:n},n.id)}))})]})]})}}},function(e){e.O(0,[634,431,516,323,774,888,179],(function(){return n=7023,e(e.s=n);var n}));var n=e.O();_N_E=n}]);